from gonvas/carlarlbase:latest

USER user

WORKDIR /project/carla

ENV SDL_VIDEODRIVER=offscreen

RUN wget https://bin.equinox.io/c/4VmDzA7iaHb/ngrok-stable-linux-amd64.zip

RUN unzip ngrok-stable-linux-amd64.zip
#ENV NGROK_ARCH=linuxia32

RUN ./ngrok authtoken 3u27yNp6YhhuzGbmxbek3_4tKxDvAciFGRVZFEZ3rSa


#COPY ngrok_config.yml .
#COPY init_script.sh .

#RUN ./ngrok http 8080


COPY . /project/carla

RUN sudo chown -R user:user /project/carla

#CMD /bin/bash

#CMD python3 -m http.server 8080 & sh ./CarlaUE4.sh & sleep 15 && python3 trainvae.py --production > py_output.txt & ./ngrok http 8080

#CMD /bin/bash train_vae.sh